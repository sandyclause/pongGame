<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Bounce game</title>
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
    <main>
        <div class="ball"></div>
        <div class="result"></div>
        <div class="paddle"></div>
    </main>
    





<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

<script>

    $(function () {


        init();

        function init(){
            //add balls
            $('main').append(`<div class="ball"></div>`);
            $('main').append(`<div class="ball"></div>`);
            $('main').append(`<div class="ball"></div>`);

            ballAddClass();
            randomStart();
            requestAnimationFrame(repeatOften);
        };



//loop through balls to add unique classname

        function ballAddClass() {
            $('.ball').each(function (index, ball) {
                $(ball).addClass('ball' + index);
            });
        };



//random ball starting position
        function randomStart() {


            let n = $('.ball').length;

            for(let i = 0; i < n; i++){
                let x = Math.floor(Math.random()*500);
                $('.ball'+i).css('left', x+'px');
            }
           

        };

//collision function
        function collisionCheck(){
            let n = $('.ball').length;
            for(let i = 0; i < n; i++){
                let dynamicBall = ('.ball' + i);
                //get the cords of the ball and paddle
                setCords(dynamicBall);

                var ball = $(dynamicBall).data('coordinates');
                var paddle = $('.paddle').data('coordinates');
                if(isCollide(ball, paddle)){

                    moveBack(dynamicBall);
                } 
                else{

                    move(dynamicBall);
                }
            }
        };

//constant check collision status
        function repeatOften(){
            collisionCheck();
            requestAnimationFrame(repeatOften);
        };

//setting the x and y values
        function setCords(ball){

            $(ball).data('coordinates', {
                x: $('.ball').offset().left,
                y: $('.ball').offset().top,
                height: $('.ball').outerHeight(),
                width: $('.ball').outerWidth()
            });
   
            $('.paddle').data('coordinates', {
                x: $('.paddle').offset().left,
                y: $('.paddle').offset().top,
                height: $('.paddle').outerHeight(),
                width: $('.paddle').outerWidth()
            });        
        };

//set interval
//request animation

        function move(ball){
            // $('.ball').animate({top: '+=50'},5000);    
            $(ball).css('top', '+=1');       
        };

        function moveBack(ball) {
            const onTop = parseInt($(ball).css('top'),10);
            if(onTop >= 0){
                $(ball).animate({ top: '0px' }, 5000);   

            }
        };        

// collision function
        function isCollide(a, b) {
            return !(
                ((a.y + a.height) < (b.y)) ||
                (a.y > (b.y + b.height)) ||
                ((a.x + a.width) < b.x) ||
                (a.x > (b.x + b.width))
            );
        };

//mouse as paddle

        $(document).on('mousemove', function(e){
            $('.paddle').css('top', e.pageY);
            $('.paddle').css('left', e.pageX);
        });

//hide mouse
        $('body').css('cursor', 'none');

    });//end of doc ready


</script>    



    
<script>

    // https://stackoverflow.com/users/2051938/mixeroid

</script>
</body>
</html>